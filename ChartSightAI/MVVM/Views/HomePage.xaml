<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="ChartSightAI.MVVM.Views.HomePage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:Controls="clr-namespace:ChartSightAI.Controls"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    Background="{StaticResource Brush.BackgroundGradient}"
    Shell.NavBarIsVisible="False">

    <!--  Root AbsoluteLayout: Main Content Area, Fixed TabBar  -->
    <AbsoluteLayout>

        <!--  Main Content Area (Header + ScrollView) - Takes up space except for the bottom tab bar  -->
        <Grid
            AbsoluteLayout.LayoutBounds="0,0,1,1"
            AbsoluteLayout.LayoutFlags="All"
            RowDefinitions="Auto,*">
            <!--  Two rows: Header (Auto), Scrollable Content (Star)  -->

            <!--  Row 0: Fixed Header  -->
            <HorizontalStackLayout Grid.Row="0" Padding="20,20,20,20">
                <Grid x:Name="HeaderLayout">
                    <HorizontalStackLayout>
                        <Image
                            Aspect="AspectFit"
                            HeightRequest="50"
                            Source="logo.png"
                            VerticalOptions="Center"
                            WidthRequest="50" />
                        <Label
                            Margin="0,0,0,0"
                            StyleClass="h2"
                            Text="ChartSightAI"
                            VerticalOptions="Center" />
                    </HorizontalStackLayout>

                </Grid>

                <HorizontalStackLayout
                    x:Name="Settings"
                    Margin="60,0,0,0"
                    HorizontalOptions="End">
                    <Image
                        Aspect="AspectFit"
                        HeightRequest="20"
                        Source="history.png"
                        WidthRequest="20" />
                    <Image
                        Margin="30,0"
                        Aspect="AspectFit"
                        HeightRequest="20"
                        Source="settings.png"
                        WidthRequest="20" />
                </HorizontalStackLayout>
            </HorizontalStackLayout>

            <!--  Row 1: Scrollable Main Content  -->
            <ScrollView Grid.Row="1" VerticalScrollBarVisibility="Never">
                <VerticalStackLayout
                    x:Name="Body"
                    Padding="20,0,20,0"
                    Spacing="15">
                    <!--  Add left/right padding here  -->

                    <!--  Main Card  -->
                    <Border StyleClass="CardStyle">
                        <VerticalStackLayout Spacing="15">
                            <Label StyleClass="h1" Text="Start a new                                    chart analysis" />
                            <Label StyleClass="caption" Text="Choose your market and upload a chart to begin" />

                            <Button
                                Background="{StaticResource Brush.ButtonGradient}"
                                Shadow="{StaticResource Sh.CardShadow}"
                                StyleClass="ButtonStyle"
                                Text="+ New Analysis" />

                            <Label
                                HorizontalOptions="Center"
                                StyleClass="caption"
                                Text="Supports Forex, Stocks, and Crypto charts" />

                            <!--  Placeholder for Animation Shape  -->
                            <Border
                                Margin="0,20,0,0"
                                BackgroundColor="{StaticResource Secondary}"
                                HeightRequest="150"
                                HorizontalOptions="Center"
                                StrokeShape="RoundRectangle 30"
                                VerticalOptions="Center">
                                <Label
                                    HorizontalOptions="Center"
                                    StyleClass="caption"
                                    Text="ðŸ“Š Animated Chart Preview"
                                    VerticalOptions="Center" />
                            </Border>

                        </VerticalStackLayout>
                    </Border>

                    <!--  Tip Box  -->
                    <Border StyleClass="CardStyle">
                        <Grid ColumnDefinitions="Auto,*">
                            <Image
                                Grid.Column="0"
                                Margin="0,0,10,0"
                                Aspect="AspectFit"
                                HeightRequest="40"
                                IsAnimationPlaying="True"
                                Source="idea.gif"
                                VerticalOptions="Center"
                                WidthRequest="40" />
                            <Label
                                Grid.Column="1"
                                LineBreakMode="WordWrap"
                                MaxLines="2"
                                StyleClass="body"
                                Text="Tip: For accurate results, make sure your chart shows price candles clearly." />
                        </Grid>
                    </Border>

                </VerticalStackLayout>
            </ScrollView>

        </Grid>

        <!--  Fixed TabBar (Occupies bottom of screen)  -->
        <Controls:TABBAR
            Margin="0,0,0,20"
            AbsoluteLayout.LayoutBounds="0.5,1,1,76"
            AbsoluteLayout.LayoutFlags="PositionProportional,WidthProportional"
            ZIndex="1000" />

    </AbsoluteLayout>

</ContentPage>